# 统一路径配置
app:
  paths:
    logs: ${APP_LOG_PATH:/maindata/log}
    data: ${APP_DATA_PATH:/maindata}
    database: ${APP_DATABASE_PATH:/maindata/db/openlist2strm.db}
    config: ${APP_CONFIG_PATH:/maindata/config}
    strm: ${APP_STRM_PATH:/app/backend/strm}
    userInfo: ${APP_USER_INFO_PATH:/maindata/config/userInfo.json}
    frontendLogs: ${APP_FRONTEND_LOGS_PATH:/maindata/log/frontend}

server:
  port: 8080
logging:
  file:
    path: ${app.paths.logs}
spring:
  datasource:
    url: jdbc:sqlite:${app.paths.database}
    driver-class-name: org.sqlite.JDBC
    # SQLite JDBC driver compatible with Alpine Linux
    hikari:
      connection-timeout: 30000
      maximum-pool-size: 3
      minimum-idle: 1
  # MyBatis configuration
  flyway:
    enabled: true
    locations: classpath:db/migration
    default-schema: main
    out-of-order: true
mybatis:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.hienao.openlist2strm.entity
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.slf4j.Slf4jImpl
  quartz:
    job-store-type: jdbc
    jdbc:
      initialize-schema: never
    auto-startup: true
springdoc:
  swagger-ui:
    path: /swagger-ui.html
jwt:
  secret: ${JWT_SECRET:secret}
  expiration-min: ${JWT_EXPIRATION_MIN:20160}  # 14天 = 14 * 24 * 60 = 20160分钟

# Actuator 健康检查配置
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true

# GitHub配置
github:
  repo:
    owner: ${GITHUB_REPO_OWNER:hienao}
    name: ${GITHUB_REPO_NAME:ostrm}
  api:
    timeout: ${GITHUB_API_TIMEOUT:30}
    retry-count: ${GITHUB_API_RETRY_COUNT:3}

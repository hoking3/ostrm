# 系统设置

系统设置页面让您能够根据个人需求定制 OpenList to Stream 的各项功能。本指南将帮助您了解各项设置的作用和使用方法。

## 🚀 快速开始

### 访问设置页面
1. 登录您的 OpenList to Stream 账户
2. 点击顶部导航栏的「系统设置」
3. 配置您需要的功能选项

### 🔧 推荐初始设置
对于新用户，建议先配置以下基础设置：
- 🎬 **TMDB API 配置**：配置 TMDB API 密钥以获取电影和电视剧信息
- 📁 **媒体文件设置**：选择要生成 STRM 文件的媒体格式
- ⚙️ **刮削设置**：配置是否生成 NFO 文件和下载海报图片
- 📄 **字幕设置**：配置是否保留同目录下的字幕文件
- 🖼️ **图片设置**：配置是否下载海报、背景图和缩略图

---

## 📁 媒体文件设置

### 生成 STRM 媒体文件后缀
选择要生成 STRM 文件的视频格式扩展名：

**配置方式：**
- 使用复选框选择需要的文件格式
- 可以多选，支持所有常见视频格式
- 系统只会为选中的格式生成 STRM 文件

**常见支持的格式包括：**
- **MP4** - 最常见的视频格式
- **MKV** - 高质量视频容器格式
- **AVI** - 传统视频格式
- **MOV** - Apple QuickTime 格式
- **WMV** - Windows Media 格式
- **FLV** - Flash 视频格式
- **WEBM** - Web 优化的视频格式
- **M4V** - Apple 视频格式
- **TS** - 传输流格式
- **MTS/M2TS** - 高清视频格式
- 以及其他多种视频格式

::: tip 💡 使用建议
- 通常建议选择所有常见格式以确保兼容性
- 根据您的媒体库实际使用的格式进行调整
- 可随时在设置中修改这些选项
:::

---

## 🎬 TMDB API 配置

自动获取电影和电视剧的详细信息（如演员、简介、评分等）。

### API 密钥配置
- **TMDB API Key**：TMDB 提供的访问密钥
  - 支持**显示/隐藏**功能保护密钥安全
  - 请在 [TMDB 官网](https://www.themoviedb.org/settings/api) 申请 API Key
  - 这是启用刮削功能的必需配置

### 语言和地区设置
- **语言设置**：
  - 中文（简体）- zh-CN
  - 中文（繁体）- zh-TW
  - English - en-US
- **地区设置**：
  - 中国 - CN
  - 台湾 - TW
  - 香港 - HK
  - 美国 - US

### HTTP 代理配置（可选）
如果需要通过代理访问 TMDB：
- **代理主机地址**：例如 `127.0.0.1`
- **代理端口**：例如 `7890`

::: tip 💡 配置建议
- TMDB API 密钥是免费的，注册后即可获得
- 建议配置与您主要使用语言相匹配的语言设置
- 如果网络环境无法直接访问 TMDB，可以配置代理
:::

---

## ⚙️ 刮削设置

配置媒体信息的获取和处理方式。

### 刮削功能开关
- **启用刮削功能**：总开关，控制是否启用媒体信息自动获取

### 刮削选项
- **生成 NFO 文件**：为媒体创建 Kodi/Plex 兼容的信息文件
- **下载海报图片**：自动获取电影/电视剧海报图片
- **使用已有刮削信息**：开启后，系统会优先使用本地已存在的刮削文件（NFO、海报等），避免重复刮削

### 图片下载优先级
系统支持三级图片下载优先级：
1. **本地文件**：检查本地是否存在对应图片文件
2. **OpenList 文件**：本地不存在时从 OpenList 同级目录下载
3. **刮削获取**：前两级都不存在时执行 TMDB 刮削

**支持的图片格式：**
- `.jpg` / `.jpeg`
- `.png`
- `.webp`
- `.bmp`

**支持的图片类型：**
- `-poster.jpg` - 海报图片
- `-fanart.jpg` - 背景图
- `-thumb.jpg` - 缩略图
- 任意命名图片（降级策略）

::: tip 💡 使用建议
- 首先需要配置 TMDB API 密钥才能启用刮削功能
- 建议开启 NFO 文件生成，便于媒体库管理
- 海报图片可以丰富媒体展示效果，建议开启
- 「使用已有刮削信息」可以减少不必要的重复刮削，节省时间
- 如果 OpenList 目录中已有图片文件，系统会自动下载而不进行刮削
- 刮削功能会在任务执行时自动运行
:::

---

## 📄 字幕设置

配置字幕文件的下载和处理方式。

### 字幕文件保留
- **保留字幕文件**：开启后，系统会自动下载视频同目录下的字幕文件

### 支持的字幕格式
系统支持以下格式的字幕文件：
- **.srt** - SubRip 字幕格式
- **.ass** - Advanced Substation Alpha 格式
- **.vtt** - WebVTT 字幕格式
- **.ssa** - SubStation Alpha 格式
- **.sub** - SubViewer 格式
- **.idx** - VobSub 索引格式

### 字幕下载机制
1. 获取当前视频所在目录的所有文件
2. 筛选出字幕格式的文件
3. 过滤掉已下载的字幕文件（防止重复下载）
4. 从 OpenList 下载字幕文件到本地

### URL 编码支持
系统会自动处理包含中文和特殊字符的路径，确保字幕文件能够正确下载。

::: tip 💡 使用建议
- 建议开启「保留字幕文件」以保留原有字幕
- 字幕文件会保存在与 STRM 文件相同的目录下
- 支持批量处理多个字幕文件
- 系统会自动避免重复下载相同的字幕文件
- 配合媒体服务器使用，可以获得完整的字幕体验
:::

---

## 🔧 其他设置

### 保存配置
所有配置修改完成后，记得点击页面底部的「保存」按钮来应用更改。

::: tip 💡 实用建议
- 修改配置后记得点击保存按钮
- TMDB API 密钥是免费的，注册即可获得
- 建议根据实际需要选择媒体格式，不一定要全选
- 字幕和图片设置可以根据需要单独开启或关闭
:::

---

## 📋 可用功能

当前版本提供以下配置功能：

- **📁 媒体文件设置**：选择要生成 STRM 文件的视频格式
- **🎬 TMDB API 配置**：获取电影和电视剧的详细信息
- **⚙️ 刮削设置**：配置媒体信息获取、NFO 文件生成和图片下载
- **📄 字幕设置**：配置是否保留同目录下的字幕文件
- **🖼️ 图片设置**：配置图片下载优先级和支持格式

---

## 💡 使用建议

### 新用户配置指南
**必需设置**：
1. 选择您需要的 **媒体文件格式**
2. 配置 **TMDB API 密钥**（从 [TMDB 官网](https://www.themoviedb.org/settings/api) 获取）

**可选设置**：
1. 配置 **语言和地区**偏好
2. 启用 **刮削功能**（自动获取媒体信息）
3. 启用 **字幕保留**（保留原有字幕文件）
4. 配置 **代理设置**（如果网络需要）

### 使用建议
- **首次使用**：建议开启刮削功能以获得完整的媒体信息
- **有本地资源**：建议开启「使用已有刮削信息」和「保留字幕文件」
- **网络较慢**：可以考虑配置代理来访问 TMDB，或开启本地优先模式
- **存储空间有限**：选择主要的视频格式即可
- **中文用户**：建议选择中文语言设置

### 故障排除
**TMDB API 无法使用**：
1. 检查 API 密钥是否正确
2. 确认网络连接正常
3. 考虑使用代理（如果网络受限）

**刮削功能不工作**：
1. 确认已启用刮削功能开关
2. 检查 TMDB API 密钥是否已配置
3. 验证网络连接是否正常

**刮削效果不佳**：
1. 检查媒体文件命名是否规范
2. 确认 TMDB API 连接正常
3. 尝试使用 AI 识别辅助

**字幕文件未下载**：
1. 确认已开启「保留字幕文件」选项
2. 检查字幕文件格式是否支持
3. 验证 OpenList 目录中是否存在字幕文件
4. 查看执行日志确认是否有下载错误

**图片文件未下载**：
1. 确认已开启相关刮削选项
2. 检查「使用已有刮削信息」是否正确设置
3. 验证 OpenList 目录中是否存在图片文件
4. 确认图片格式是否支持

---

## 🆘 获取帮助

如果在设置过程中遇到问题：

1. **查看提示信息**：注意页面上的提示和说明
2. **参考相关文档**：
   - [常见问题](./faq.md)
   - [快速开始](./quick-start.md)
   - [开发指南](./dev.md)
3. **联系支持**：
   - 在 GitHub 提交 Issue
   - 查看项目文档获取更多信息

---

合理的系统设置可以让 OpenList to Stream 更好地为您服务。建议根据自己的使用习惯和网络环境，逐步调整各项设置，找到最适合您的配置方案。
